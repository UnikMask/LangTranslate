/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package Transpire;

import java.io.File;
import java.io.IOException;
import java.util.List;

import net.sourceforge.argparse4j.inf.Namespace;

public class App {
    public String getGreeting() {
        return "Suck ma balls";
    }



	// App arguments - stored here for now
	static Prompt promptInstance = new Prompt();
	List<File> sourceFiles;
	String sourceLanguage;
	String targetLanguage;
	boolean appFlag = true;


	// Get files to translate in the program.
	public List<File> getFilesToTranslate(Namespace resn) {
		List<File> resFiles = (List<File>) resn.get("files");
		return resFiles;
	}


	// Get source language to translate from.
	public String getSourceLanguage(Namespace resn) {
			String resFiles = (String) resn.get("source language");
			return resFiles;
	}


	// Get target language to translate to.
	public String getTargetLanguage(Namespace resn) {
		String resFiles = (String) resn.get("target language");
		return resFiles;
	}


	/**
	 * Get application wanted variables based on given arguments.
	 * @param args The app arguments.
	 * @return Whether the program is true or false.
	 */
	public boolean getArgsInApp(String[] args) {
		Namespace resn = promptInstance.launchPrompt(args);
		if (resn != null) {
			sourceFiles =
				this.getFilesToTranslate(resn);
			sourceLanguage =
				this.getSourceLanguage(resn);
			targetLanguage =
				this.getTargetLanguage(resn);
			return true;
		}
		else {
			return false;
		}
	}


	/**
	 * Constructor for app.
	 * @param args The application parameters.
	 */
	public App(String[] args) {
		appFlag = getArgsInApp(args);
	}


    public static void main(String[] args) {
        //Base: transpire Bonjour.java fr
        //Backend: transpire Bonjour.java -s fr -t en
        // --help

		App mainInstance = new App(args);
		if (mainInstance.appFlag) {
			Parser parser;
			try{
				parser = new Parser("fr", "python");
				Prompt prompt = new Prompt();
				String code = "# Store input numbers\n" +
                        "num1 = input('Enter first number: ')\n" +
                        "num2 = input('Enter second number: ')\n" +
                        "'''\n" +
                        "This is a comment\n" +
                        "This is a 2nd line comment\n" +
                        "'''\n" +
                        "# Add two numbers\n" +
                        "sum = float(num1) + float(num2)\n" +
                        "\n" +
                        "\"\"\"\n" +
                        "YOOOOOOOOOOOOOOOOOOOOOOO\n" +
                        "SUCK MY BALLLLLLLLLLLLLLLLLLS\n"+
                        "\"\"\"\n" +
                        "# Display the sum\n" +
                        "print('The sum of {0} and {1} is {2}'.format(num1, num2, sum))";
				System.out.println(parser.parseString(code));
			}catch(NotSupportedLanguage e){
				System.out.println(e.getMessage());
			}catch(IOException e) {
				System.out.println("Couldn't open file.");
			}
		}
    }
}
